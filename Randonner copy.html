<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>Randonnee</title>
    <link rel="stylesheet" href="Communs.css" type="text/css" />
  </head>
  <body>
    <!-- le menu de navigation -->
    <nav>
      <ul class="barre-de-menu">
        <li><a href="Contribuer.html">Contribuer</a></li>
        <li><a href="Randonner.html" class="actuel">Randonner</a></li>
      </ul>
    </nav>

    <!-- le contenu de la page -->
    <main>
      <section><h1>Bienvenue sur la page de Randonnee !</h1></section>
      <!-- traitement bdd -->
      <section>
        <p>ici devra s'afficher la liste des randonnées stocké dans la bdd et dans l'ordre alphabétique</p>
        <h1>Liste de randonnées</h1>
          <ul id="randoList"></ul>
          <script>
            // Recuperation de la base de données
            const db = new sqlite3.Database('/bdd.db');
            //*************************************************
            //Requêtes SQL sur la bdd
            const query = 'SELECT nom, description FROM rando ORDER BY nom ASC';
            db.all(query, [], (err, rows) => {
              if (err) {
                console.error(err);
              } else {
              // Récupération de l'élément UL dans la page HTML
              const randoList = document.getElementById("randoList");
              // Parcours des résultats et création des éléments de liste LI
                rows.forEach((row) => {
                  const li = document.createElement("li");
                  li.textContent = "Nom : " + row.nom + ", Description : " + row.description;
                  randoList.appendChild(li);
                });
              }
            //*************************************************
            // Fermeture de la base de données
            db.close();
          });
          </script>              
      </section>
    </main>
  </body>
</html>